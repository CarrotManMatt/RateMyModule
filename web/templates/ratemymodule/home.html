{% extends "ratemymodule/base-with-content.html" %}

{% load static %}

{% block styles %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'ratemymodule/styles/home.css' %}"/>
    <link rel="stylesheet"
          href="{% static 'ratemymodule/styles/main-dropdown.css' %}"/>
    <link rel="stylesheet"
          href="{% static 'ratemymodule/styles/submit-report.css' %}"/>
{% endblock styles %}

{% block left_sidebar_upper %}
    {# include main dropdown #}
    {% include "ratemymodule/fragments/main-dropdown.html" %}
{% endblock left_sidebar_upper %}

{% block main_content %}
    <div class="filter-bar">
        {# Filter bar goes here #}
        <div class="tag-item">
            <div class="filter-title">Tags:</div>
            <div class="filter-tag-drop-down-button">
                <svg width="18" height="19" viewBox="0 0 18 19" fill="none"
                     xmlns="http://www.w3.org/2000/svg">
                    <title>Filter tag drop down button icon</title>
                    <path d="M13.5 7.25L9 11.75L4.5 7.25" stroke="white"
                          stroke-width="1.5"/>
                </svg>
            </div>
        </div>
        <div class="rating-item">
            <div class="filter-title">Rating:</div>
            <div class="star-elements">
                {% for i in "x"|rjust:"5" %}
                    <svg width="22" height="22" viewBox="0 0 15 14" fill="none"
                         xmlns="http://www.w3.org/2000/svg"
                         data-selected="false">
                        <title>Filter rating star icon</title>
                        <g id="Star_duotone">
                            <path id="Star 1" class="filter-rating-star"
                                  stroke="#cbcbcb" fill="#cbcbcb"
                                  fill-opacity="39%"
                                  d="M6.76253 4.14227C7.28694 2.91665 7.54914 2.30383 8.00002 2.30383C8.45091 2.30383 8.71311 2.91665 9.23751 4.14227L9.26193 4.19934C9.55819 4.89176 9.70632 5.23797 10.0082 5.4484C10.3101 5.65883 10.7064 5.6921 11.499 5.75865L11.6423 5.77068C12.9395 5.8796 13.5881 5.93405 13.7269 6.32092C13.8657 6.70778 13.384 7.11862 12.4207 7.9403L12.0991 8.21454C11.6115 8.63049 11.3676 8.83846 11.254 9.11104C11.2328 9.16189 11.2152 9.21398 11.2012 9.26699C11.1265 9.55115 11.1979 9.85286 11.3407 10.4563L11.3852 10.6441C11.6476 11.7531 11.7789 12.3075 11.5497 12.5467C11.4641 12.6361 11.3529 12.7004 11.2292 12.732C10.8984 12.8167 10.4288 12.4579 9.48949 11.7403C8.87271 11.2692 8.56432 11.0336 8.21025 10.9806C8.07098 10.9597 7.92906 10.9597 7.78979 10.9806C7.43572 11.0336 7.12733 11.2692 6.51055 11.7403C5.57125 12.4579 5.1016 12.8167 4.7708 12.732C4.64719 12.7004 4.53591 12.6361 4.4503 12.5467C4.22118 12.3075 4.3524 11.7531 4.61485 10.6441L4.6593 10.4563C4.80211 9.85286 4.87351 9.55115 4.79881 9.26699C4.78487 9.21398 4.76725 9.16189 4.74605 9.11104C4.6324 8.83846 4.38856 8.63049 3.90089 8.21454L3.57937 7.9403C2.61601 7.11862 2.13433 6.70778 2.27311 6.32092C2.4119 5.93405 3.0605 5.8796 4.35771 5.77068L4.50101 5.75865C5.29362 5.6921 5.68992 5.65883 5.99182 5.4484C6.29372 5.23797 6.44185 4.89176 6.73811 4.19934L6.76253 4.14227Z"
                                  fill="#C7A9FF" stroke="#7F4FD9"
                                  stroke-width="1.5"/>
                        </g>
                    </svg>
                {% endfor %}
            </div>
        </div>
        <div class="year-item">
            <div class="filter-title">Year:</div>
            <label>
                <input type="text" class="year-input-box">
            </label>
        </div>
        <div class="filter-button" id="filter-button">
            <svg width="18" height="19" viewBox="0 0 18 19" fill="none"
                 xmlns="http://www.w3.org/2000/svg">
                <title>Filter button icon</title>
                <path d="M7.40811 15.2806L7.72433 16.2293H7.72434L7.40811 15.2806ZM14.7071 6.04289L15.4142 6.75L14.7071 6.04289ZM11.5429 9.20711L10.8358 8.50001L11.5429 9.20711ZM4 4.5H14V2.5H4V4.5ZM4 5.33579V4.5H2V5.33579H4ZM7.16421 8.5L4 5.33579L2.58579 6.75L5.74999 9.91421L7.16421 8.5ZM5.74999 9.91421V14.8063H7.75V9.91421H5.74999ZM5.74999 14.8063C5.74999 15.8301 6.75304 16.5531 7.72433 16.2293L7.09188 14.3319C7.41565 14.224 7.75 14.465 7.75 14.8063H5.74999ZM7.72434 16.2293L11.2243 15.0626L10.5919 13.1653L7.09188 14.3319L7.72434 16.2293ZM11.2243 15.0626C11.8369 14.8585 12.25 14.2853 12.25 13.6396H10.25C10.25 13.4244 10.3877 13.2333 10.5919 13.1653L11.2243 15.0626ZM12.25 13.6396V9.91422H10.25V13.6396H12.25ZM14 5.33579L10.8358 8.50001L12.25 9.91422L15.4142 6.75L14 5.33579ZM14 4.5V5.33579H16V4.5H14ZM15.4142 6.75C15.7893 6.37493 16 5.86622 16 5.33579H14L15.4142 6.75ZM12.25 9.91422V9.91422L10.8358 8.50001C10.4607 8.87508 10.25 9.38379 10.25 9.91422H12.25ZM5.74999 9.91421H7.75C7.75 9.38378 7.53928 8.87507 7.16421 8.5L5.74999 9.91421ZM2 5.33579C2 5.86622 2.21071 6.37493 2.58579 6.75L4 5.33579L4 5.33579H2ZM14 4.5H16C16 3.39543 15.1046 2.5 14 2.5V4.5ZM4 2.5C2.89543 2.5 2 3.39543 2 4.5H4V4.5V2.5Z"
                      fill="white"/>
            </svg>
            <div class="filter-button-title">Filter</div>
        </div>
    </div>

    {# post content goes here #}

    <div class="post-container">
        {% if post_list|length > 0 %}
            {% for post in post_list %}
                <div class="post-item">
                    <div>
                        {# Post Header Content #}
                        <div class="header">
                            <div class="title">
                                From {{ post.student_type }}
                                | {{ post.module.university.short_name }}
                            </div>
                            <div class="module-year">
                                {{ post.academic_year_start }}
                            </div>
                            <button class="open-modal-button"
                                    onclick="openModal()">
                                <div class="svg-container">
                                    <svg class="flag-container"
                                         xmlns="http://www.w3.org/2000/svg"
                                         xmlns:xlink="http://www.w3.org/1999/xlink"
                                         version="1.1" x="0px" y="0px"
                                         viewBox="0 0 100 100"
                                         height="10" width="10"
                                         enable-background="new 0 0 100 100"
                                         xml:space="preserve">
                                        <title>Report button icon</title>
                                            <path class="flag" d="M73.377,36.054l10.646-17.9c0.46-0.773,0.469-1.732,0.024-2.515c-0.444-0.781-1.273-1.264-2.173-1.264H59.292v-5.5  c0-1.381-1.119-2.5-2.5-2.5H18.125c-1.381,0-2.5,1.119-2.5,2.5v82.25c0,1.381,1.119,2.5,2.5,2.5s2.5-1.119,2.5-2.5v-39.75h20.083  v5.5c0,1.381,1.119,2.5,2.5,2.5h38.667c0.882,0,1.699-0.465,2.149-1.224c0.45-0.758,0.468-1.698,0.046-2.473L73.377,36.054z   M20.625,11.375h33.667v35H20.625V11.375z M45.708,54.375v-3h11.084c1.381,0,2.5-1.119,2.5-2.5v-29.5h18.188l-9.128,15.347  c-0.451,0.759-0.469,1.699-0.047,2.475l9.361,17.179H45.708z"
                                                  fill="white"/>
                                    </svg>
                                </div>
                            </button>
                        </div>

                            <div class="separator"></div>
                            {# Post Item Bar Content #}
                            <div class="items">
                                {# Calculating which type of star to display #}
                                <div class="item-element">
                                    <svg id="abcd" width="18" height="18" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <title>Like rating up arrow</title>
                                        <path class="post-like-rating-arrow like-rating-up-arrow"
                                              data-post-id="{{ post.id }}"
                                              d="M5.24999 11.6666V6.99995H3.15816C3.04281 6.99993 2.93005 6.9657 2.83414 6.9016C2.73824 6.8375 2.66349 6.74641 2.61935 6.63983C2.57521 6.53326 2.56366 6.41599 2.58615 6.30285C2.60865 6.18971 2.66419 6.08578 2.74574 6.0042L6.58758 2.16237C6.69697 2.05301 6.84531 1.99158 6.99999 1.99158C7.15467 1.99158 7.30302 2.05301 7.41241 2.16237L11.2542 6.0042C11.3358 6.08578 11.3913 6.18971 11.4138 6.30285C11.4363 6.41599 11.4248 6.53326 11.3806 6.63983C11.3365 6.74641 11.2618 6.8375 11.1658 6.9016C11.0699 6.9657 10.9572 6.99993 10.8418 6.99995H8.74999V11.6666C8.74999 11.8213 8.68854 11.9697 8.57914 12.0791C8.46974 12.1885 8.32137 12.25 8.16666 12.25H5.83333C5.67862 12.25 5.53024 12.1885 5.42085 12.0791C5.31145 11.9697 5.24999 11.8213 5.24999 11.6666Z"
                                              stroke="#747474" stroke-width="1.25"
                                              stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                    <div class="post-like-rating-counter">{{ post.overall_likes_count }}</div>
                                    <svg width="18" height="18" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <title>Like rating down arrow</title>
                                        <path class="post-like-rating-arrow like-rating-down-arrow"
                                              data-post-id="{{ post.id }}"
                                              d="M5.24999 2.33338V7.00005H3.15816C3.04281 7.00007 2.93005 7.0343 2.83414 7.0984C2.73824 7.16249 2.66349 7.25359 2.61935 7.36017C2.57521 7.46674 2.56366 7.58401 2.58615 7.69715C2.60865 7.81029 2.66419 7.91422 2.74574 7.9958L6.58758 11.8376C6.69697 11.947 6.84531 12.0084 6.99999 12.0084C7.15467 12.0084 7.30302 11.947 7.41241 11.8376L11.2542 7.9958C11.3358 7.91422 11.3913 7.81029 11.4138 7.69715C11.4363 7.58401 11.4248 7.46674 11.3806 7.36017C11.3365 7.25359 11.2617 7.16249 11.1658 7.0984C11.0699 7.0343 10.9572 7.00007 10.8418 7.00005H8.74999V2.33338C8.74999 2.17867 8.68854 2.0303 8.57914 1.9209C8.46974 1.8115 8.32137 1.75005 8.16666 1.75005H5.83333C5.67862 1.75005 5.53024 1.8115 5.42085 1.9209C5.31145 2.0303 5.24999 2.17867 5.24999 2.33338Z"
                                              stroke="#747474" stroke-width="1.25"
                                              stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="item-element">
                                    {% for i in "x"|rjust:"5" %}
                                        {% if post.overall_rating >= forloop.counter %}
                                            <svg width="16" height="15"
                                                 viewBox="0 0 15 14" fill="none"
                                                 xmlns="http://www.w3.org/2000/svg">
                                                <title>Selected overall rating star icon</title>
                                                <g id="Star_duotone">
                                                    <path id="Star 1" d="M6.76253 4.14227C7.28694 2.91665 7.54914 2.30383 8.00002 2.30383C8.45091 2.30383 8.71311 2.91665 9.23751 4.14227L9.26193 4.19934C9.55819 4.89176 9.70632 5.23797 10.0082 5.4484C10.3101 5.65883 10.7064 5.6921 11.499 5.75865L11.6423 5.77068C12.9395 5.8796 13.5881 5.93405 13.7269 6.32092C13.8657 6.70778 13.384 7.11862 12.4207 7.9403L12.0991 8.21454C11.6115 8.63049 11.3676 8.83846 11.254 9.11104C11.2328 9.16189 11.2152 9.21398 11.2012 9.26699C11.1265 9.55115 11.1979 9.85286 11.3407 10.4563L11.3852 10.6441C11.6476 11.7531 11.7789 12.3075 11.5497 12.5467C11.4641 12.6361 11.3529 12.7004 11.2292 12.732C10.8984 12.8167 10.4288 12.4579 9.48949 11.7403C8.87271 11.2692 8.56432 11.0336 8.21025 10.9806C8.07098 10.9597 7.92906 10.9597 7.78979 10.9806C7.43572 11.0336 7.12733 11.2692 6.51055 11.7403C5.57125 12.4579 5.1016 12.8167 4.7708 12.732C4.64719 12.7004 4.53591 12.6361 4.4503 12.5467C4.22118 12.3075 4.3524 11.7531 4.61485 10.6441L4.6593 10.4563C4.80211 9.85286 4.87351 9.55115 4.79881 9.26699C4.78487 9.21398 4.76725 9.16189 4.74605 9.11104C4.6324 8.83846 4.38856 8.63049 3.90089 8.21454L3.57937 7.9403C2.61601 7.11862 2.13433 6.70778 2.27311 6.32092C2.4119 5.93405 3.0605 5.8796 4.35771 5.77068L4.50101 5.75865C5.29362 5.6921 5.68992 5.65883 5.99182 5.4484C6.29372 5.23797 6.44185 4.89176 6.73811 4.19934L6.76253 4.14227Z" fill="#C7A9FF" stroke="#7F4FD9" stroke-width="1.5"/>
                                                </g>
                                            </svg>
                                        {% else %}
                                            <svg width="16" height="15" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <title>Unselected overall rating star icon</title>
                                                <g id="Star_duotone">
                                                    <path id="Star 1"
                                                      class="post-star-empty"
                                                      d="M6.76253 4.14227C7.28694 2.91665 7.54914 2.30383 8.00002 2.30383C8.45091 2.30383 8.71311 2.91665 9.23751 4.14227L9.26193 4.19934C9.55819 4.89176 9.70632 5.23797 10.0082 5.4484C10.3101 5.65883 10.7064 5.6921 11.499 5.75865L11.6423 5.77068C12.9395 5.8796 13.5881 5.93405 13.7269 6.32092C13.8657 6.70778 13.384 7.11862 12.4207 7.9403L12.0991 8.21454C11.6115 8.63049 11.3676 8.83846 11.254 9.11104C11.2328 9.16189 11.2152 9.21398 11.2012 9.26699C11.1265 9.55115 11.1979 9.85286 11.3407 10.4563L11.3852 10.6441C11.6476 11.7531 11.7789 12.3075 11.5497 12.5467C11.4641 12.6361 11.3529 12.7004 11.2292 12.732C10.8984 12.8167 10.4288 12.4579 9.48949 11.7403C8.87271 11.2692 8.56432 11.0336 8.21025 10.9806C8.07098 10.9597 7.92906 10.9597 7.78979 10.9806C7.43572 11.0336 7.12733 11.2692 6.51055 11.7403C5.57125 12.4579 5.1016 12.8167 4.7708 12.732C4.64719 12.7004 4.53591 12.6361 4.4503 12.5467C4.22118 12.3075 4.3524 11.7531 4.61485 10.6441L4.6593 10.4563C4.80211 9.85286 4.87351 9.55115 4.79881 9.26699C4.78487 9.21398 4.76725 9.16189 4.74605 9.11104C4.6324 8.83846 4.38856 8.63049 3.90089 8.21454L3.57937 7.9403C2.61601 7.11862 2.13433 6.70778 2.27311 6.32092C2.4119 5.93405 3.0605 5.8796 4.35771 5.77068L4.50101 5.75865C5.29362 5.6921 5.68992 5.65883 5.99182 5.4484C6.29372 5.23797 6.44185 4.89176 6.73811 4.19934L6.76253 4.14227Z"
                                                      fill="#C7A9FF"
                                                      stroke="#7F4FD9"
                                                      stroke-width="1.5"/>
                                                </g>
                                            </svg>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                                {# Displaying all tags #}
                                {% for tag in post.topic_tag_set.all %}
                                    <div class="item-element can-hover">
                                        {{ tag }}
                                    </div>
                                {% endfor %}
                                {% for tag in post.tool_tag_set.all %}
                                    <div class="item-element can-hover">
                                        {{ tag }}
                                    </div>
                                {% endfor %}
                                {% for tag in post.other_tag_set.all %}
                                    <div class="item-element can-hover">
                                        {{ tag }}
                                    </div>
                                {% endfor %}
                                {# Displaying when the post was made #}
                                <div class="item-element">
                                    {{ post.date_time_created | date:"M-y" }}
                                </div>
                                {# Displaying module name #}
                                <div class="item-element">
                                    {{ post.module.name }}
                                </div>
                            </div>
                            {# Displaying contents of the review #}
                            <div class="contents">
                                {{ post.content }}
                            </div>
                            {%  if post.is_user_suspicious  %}
                                <div class="disclaimer-content">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-circle-fill" viewBox="0 0 16 16">
                                    <title>warning flag icon</title>
                                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"/>
                                </svg>
                                    <body> &nbsp User Note: This post is from a user with suspicious account activity, so the content may not be reliable</body>
                                </div>
                            {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="post-item">
                {% if error %}
                    {{ error }}
                {% else %}
                    No posts match the given search terms.
                {% endif %}
            </div>
        {% endif %}
    </div>
{% endblock main_content %}

{% block right_sidebar_upper %}
    {#    <div class="right-sidebar-upper-content">#}
    {# Content for upper part of the right sidebar #}
    {#    </div>#}
{% endblock right_sidebar_upper %}

{% block right_sidebar_lower %}
    <div class="right-sidebar-lower-content">
        {# Content for lower part of the right sidebar #}
        <style> {# TODO: put styling in css, where it currently doesnt work #}
            .analytics-button {
                display: inline-block;
                text-decoration: none;
                padding: 10px 10px;
                background-color: var(--button-color);
                color: white;
                border-radius: 8px;
                transition: background-color 0.3s;
                text-align: center;
                cursor: pointer;
            }
        </style>
        <button class="analytics-button" id="advanced-analytics" onclick="openAAModal()">Advanced Analytics</button>

        {# sidebar graphs #}
        <div class="graphs">
            {{ overall_rating_bar_graph }}
            {{ difficulty_bar_graph }}
            {{ teaching_graph }}
            {{ assessment_graph }}
        </div>
    </div>
{% endblock right_sidebar_lower %}

{% block modals %}
    {{ block.super }}
{#  advanced analytics graph modal#}
    <div class="modal" id="analytics-modal" >
        <div class="modal-content">
            <span class="close" onclick="closeAAModal()" tabindex="0" role="button" id="aa-close">
                X
            </span>
            <h2> Advanced Analytics</h2>
            <div id="aa-graph-div">
            {{ advanced_analytics_graph }}
            </div>
            <form method="get" action={% url 'ratemymodule:home' %}>
                <table class="analytics-table">
                    <tr>
                        <td>{{ analytics_form.overall_rating }}</td>
                        <td class="analytics-form-text"> Overall Rating</td>
                        <td class="analytics-form-text">&emsp;&emsp;Start Year:</td>
                        <td>{{ analytics_form.start_year }}</td>
                    </tr>
                    <tr>
                        <td>{{ analytics_form.difficulty_rating }} </td>
                        <td class="analytics-form-text">Difficulty Rating</td>
                    </tr>
                    <tr>
                        <td>{{ analytics_form.teaching_quality }}</td>
                        <td class="analytics-form-text">Teaching Quality</td>
                        <td class="analytics-form-text">&emsp;&emsp;End Year:</td>
                        <td>{{ analytics_form.end_year }}</td>
                    </tr>
                    <tr>
                        <td>{{ analytics_form.assessment_quality }}</td>
                        <td class="analytics-form-text">Assessment Quality</td>
                    </tr>
                    <input type="hidden" name="module" value="{{ module_code|urlencode }}">
                    <input type="hidden" name="action" value="generate_graph">
                </table>
               <button class="analytics-button">
                   <input class="analytics-button-text" type="submit" value="Submit">
               </button>
            </form>

        </div>
    </div>

    <div class="modal" id="report-modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Select an Option</h2>
            <div class="options">
                <button onclick="selectOption('Hate Speech of Language')">Hate
                    Speech or Language
                </button>
                <button onclick="selectOption('Identifying Information')">
                    Identifying Information
                </button>
                <button onclick="selectOption('Assignment Answers')">Assignment
                    Answers
                </button>
                <button onclick="selectOption('Spam')">Spam</button>
                <button onclick="selectOption('Bullying or Harassment')">
                    Bullying or Harassment
                </button>
                <button onclick="selectOption('False Information')">False
                    Information
                </button>
                <button onclick="selectOption('Sexual Content')">Sexual
                    Content
                </button>
            </div>
            <button class="cancel-button" onclick="closeModal()">Cancel
            </button>
        </div>
    </div>

    <div class="modal confirmation-modal" id="confirmation-modal">
        <div class="modal-content confirmation-modal-content">
            <span class="close"
                  onclick="closeConfirmationModal()">&times;</span>
            <h2>You are reporting this post for:</h2>
            <h3 id="selectedOptionText"></h3>
            <p>We will review your report as soon as possible and take
                appropriate action if we believe this has broken our community
                guidelines</p>
            <button class="confirm-button" onclick="confirmSelection()">Confirm
                Report
            </button>
            <button class="cancel-button" onclick="cancelConfirmation()">Back
            </button>
        </div>
    </div>
{% endblock modals %}

{% block scripts %}
{{ block.super }}
    <script>
        document.addEventListener("DOMContentLoaded", function() {
              document.getElementById("confirmation-modal").style.display = "none";
              if(document.getElementById("aa-graph-div").innerText.trim()){
                  openAAModal()
              }
        });

        {# when trying to put letters in AA year boxes, removes them #}
        document.addEventListener("DOMContentLoaded", function() {
            const startYearInput = document.getElementById("id_start_year");
            startYearInput.addEventListener("input", function() {
                this.value = this.value.replace(/\D/g, "");
            });
            const endYearInput = document.getElementById("id_end_year");
            endYearInput.addEventListener("input", function() {
                this.value = this.value.replace(/\D/g, "");
            });
        });

        document.getElementById("aa-close").addEventListener("keydown", function(event){
            if(event.key === "Enter"){
                closeAAModal()
            }
        });

        {# closes the advanced analytics modal on esc pressed, could make this close all modals #}
        document.addEventListener("keydown", function(event) {
          if (event.key === "Escape") {
            closeAAModal();
          }
        });

        function openAAModal() {  {# opens the advanced analytics modal #}
          document.getElementById("analytics-modal").style.display = "block";
        }

        function closeAAModal() {   {# closes the advanced analytics modal #}
            document.getElementById("analytics-modal").style.display = "none";
        }

        function openModal() {
            document.getElementById("report-modal").style.display = "block";
        }

        function closeModal() {
            document.getElementById("report-modal").style.display = "none";
        }

        function selectOption(option) {
            var selectedOptionText = document.getElementById("selectedOptionText");
            selectedOptionText.innerText = option;
            document.getElementById("report-modal").style.display = "none";
            document.getElementById("confirmation-modal").style.display = "block";
        }

        function closeConfirmationModal() {
            document.getElementById("confirmation-modal").style.display = "none";

        }

        function confirmSelection() {
            // Add your logic for handling the confirmed selection here
            console.log("Confirmed Selection");
            closeConfirmationModal();
        }

        function cancelConfirmation() {
            document.getElementById("report-modal").style.display = "block";
            closeConfirmationModal();
        }
    </script>
{% endblock scripts %}
